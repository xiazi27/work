# mit笔记

## 第一讲课程概览与shell

shell是命令语言解释器

Bash是目前最常用的一种shell（Bourne Again shell)

Bash和shell也是一种编程语言，不仅能运行带有参数的程序也能做while，for循环，同时也可以定义函数。

shell是我们与计算机交互的主要文本界面 

参数之间用空格间隔 如echo hello，输出hello。之所以输入echo，date会运行是因为计算机自带一些内置程序

环境变量实在启动shell时设置的东西，并不需要每次都设置，例如主目录等

路径变量即查看搜索路径如echo $PATH。计算机时逐个遍历路径直到找到date或echo的程序。which echo可以查运行的哪个程序。

路径：描述计算机上文件位置的方式路径分隔方式不同。绝对路径能完全确定文件位置而相对路径是相对于你当前所在位置的路径而言的运行**pwd**可以打印当前所在未知

cd是用来更改目录的 .表示子目录..表示父目录

| cd..      | 返回上级目录   |
| --------- | -------------- |
| cd../..   | 返回上两级目录 |
| cd~       | 进入主目录     |
| cd c:\    | 进入c盘        |
| cd ./home | 进入home目录   |

ls：列出当前目录中的文件ls——help进入帮助信息

cp：复制 cp需要两个路径也不必在同一个目录下

rm：删除文件

rmdir：删除空目录其为一种安全机制

mkdir：创建一个新目录

man：man ls查看ls的使用

<:将这个程序的输出重定向为这个文件的内容 >:将前面程序的输出重定向到这个文件中

cat：为打印文件内容的命令 >>:表示追加

|：将左边程序的输出作为右边程序的输入

## 第二讲shell工具和脚本

介绍shell的变量语法，流程控制，函数等

false||echo"Oops fail"输出Oops fail若第一个命令失败了就执行第二个命令

而&&则是只有在第一个命令没有错误时才会执行第二个命令

如何将一个命令的输出存储到一个变量中？如echo “we are in$(pwd)"

进程替换：<加上命令再套上括号作用为内部执行然后将输出放到一个类似临时文件中

.sh时大多数shell都有的一种文件名扩展方式

shellcheck是一种工具可以为你提供警告语法错误和其他一些不正确的引用

## 第三讲编译器vim

vim编译器（模态编译器）

ctrl v的三种表现形式1.^v 2.ctrl-v 3.<C-V>

首先进入普通模式用于阅读内容从文件到文件的跳转

| 按键 | 模式       | 作用                        |
| ---- | ---------- | --------------------------- |
| i    | 插入模式   | x删除一个字符 u还原一个字符 |
| r    | replace    |                             |
| v    | visual     | 选择文本y复制               |
| s-v  | line       |                             |
| c-v  | block      |                             |
| ：   | 命令行模式 | quit退出vim w代表保存       |

| 按键 | 功能                 |
| ---- | -------------------- |
| h    | 左                   |
| j    | 下                   |
| k    | 上                   |
| l    | 右                   |
| w    | 移动一个单词         |
| b    | 向后移动一个单词     |
| e    | 移动到每个单词的末尾 |
| o    | 移动到开头           |
| $    | 移到行末尾           |
| ^    | 移到第一个非空字符   |
| c-u  | 向上                 |
| c-d  | 向下                 |
| G    | 顶部                 |
| gg   | 底部                 |
| ：q  | 关闭窗口或退出       |
| ：qa | 关闭所有窗口         |
| o    | 插入并换行           |
| d    | 删除                 |
| u    | 恢复相当于撤销       |
| dw   | 删除单词             |
| de   | 删除到末尾           |
| ce   | 删除并修改           |
| dd   | 删除行               |
| r，a | 替换为a              |
| cc   | 删除并修改           |
| x    | 只删除字符           |
| ~    | 反转大小写           |
| 4j   | 移动四次             |
| /    | 开始搜索位置         |

## 第四讲数据整理

讲一种数据格式转化为另一种数据格式

sed是个流编译器允许我们修改流的内容可将其是为文本替换

echo ‘aba’|sed's/[ab]//'替换数据每行只会匹配一次

若为echo ‘aba’|sed's/[ab]//g'则会尽可能匹配更多内容

sort可以接受多行的输入再排序然后将排序好的行输出

tail -n10只需要最后十行的数据

（第四讲不是很理解）

## 第五讲命令行环境

主要内容：什么是dotfiles，如何配置shell，高效使用服务器

sleep 20//沉睡20s

CTRL-c//进程停止。实际上是终端向程序发送了一个名为sigint的信号

输入man signal可以查找信号列表

SIGINT大多数情况下等同于SIGINT,SIGQUIT但其并不通过终端发送

SIGHUP表示终端出现挂起

SIGSTOP暂停程序进行，SIGCONT稍后继续执行

CTRL-C未停止是因为SIGINGT被程序捕获

CTRL-\会发送不同的信号SIGQUIT这个未被捕获

SIGKILL是不会被捕获的可能会导致孤儿进程

CTRL-Z会显示暂停

&希望程序在后台进行，在后台运行

bg%1这里的1代表第一个进程即标识符

fg你想将其恢复到前台并重新连接到标准输出

### 终端复用器

可以让你创建不同的工作空间快速的排列

tmux a重新连接到对话中

没有模式的概念

tmux new创建一个新的会话

CTRL-A会跳转到上一个而p是切换到上一个窗口

CTRL-An来到下一个窗口

ctrl-a1就是来到第一个窗口

ctrl-az即返回

几个终端可以同时进行

许多shell程序都会使用基于文本的配置文件

## 第六讲版本控制

见图片

## 第七讲调试及性能分析

有bug如何调试

1.打印语句来检查（比较繁琐

2.logging（用日志来调试）用于复杂程序，ad：你可以定义严重性级别后过滤

可用工具：输出可读性提高且可改变颜色

：/color.sh输出许多不同颜色 

日志通常放在/var/log下

一般来说每个软件都有自己的日志

log show--last cos（Mac中显示10s内出现的日志）

log show--last|m|grep hello(显示最近1分钟并搜素hello)

日志可告诉你信息来帮助你排查问题

#### 使用调试器如ipython

| 按键     | 作用             |
| -------- | ---------------- |
| l：list  | 列出代码         |
| s:step   | 逐行执行         |
| b n      | 在第n行创建断点  |
| c        | 继续执行这个程序 |
| p locals | 使用locals函数   |

GDB适用于c或c++这类的c语言

suto strace ls-l>/dev/null运行ls-l命令，忽略ls输出，不忽略strace输出

ls-lat查看文件的属性

有些程序可将源代码作为输入，并指出哪些部分可能是错的

静态分析工具：pyflakes，mypy

writegood:英语静态分析工具

分析器

跟踪分析器：插入东西与代码并执行

采样分析器：执行你的程序并在100ms内停止程序

内存分析器通过运行程序来获取内存占用

lsof打印大量信息